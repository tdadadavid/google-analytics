var o=class{id="";siteId="";referrer="";isTouchDevice=!1;constructor(t,e,a){this.siteId=t,this.referrer=e;let s=this.getSession("id");s&&(this.id=s)}track(t,e){let a={tracking:{event:t,category:e,identity:this.id,referrer:this.referrer,userAgent:navigator.userAgent,isTouchDevice:this.isTouchDevice,type:e==="Page views"?"page":"event"},site_id:this.siteId};return console.log(a),this.trackReq(a)}page(t){this.track(t,"Page views")}identity(t){this.id=t,this.setSession("id",this.id)}getSession(t){t=`__got_${t}__`;let e=sessionStorage.getItem(t);return e?JSON.parse(e):null}setSession(t,e){t=`__got_${t}__`,sessionStorage.setItem(t,JSON.stringify(e))}trackReq(t){let e=JSON.stringify(t),a=`http://localhost:7500/track?data=${btoa(e)}`,s=new Image;s.src=a,console.log(s)}};((i,t)=>{let e=t.currentScript?.dataset;if(e){if(!e.siteid){console.error("you must have a data-siteid in your script tag");return}}else{console.error("you must have a data-siteid in your script tag");return}let a="",s=e.referrer;s&&s.indexOf(`${i.location.protocol}://${i.location.host}`)==0&&(a=s);let c=!1;(navigator.maxTouchPoints>0||"ontouchstart"in window)&&(c=!0);let g=i.location.pathname,r=new o(e.siteid,a,{isTouchEnabled:c});i._got=i._got||r,r.page(g);let n=window.history;if(n.pushState){let d=n.pushState;n.pushState=function(){d.apply(this,arguments),r.page(i.location.pathname)},window.addEventListener("popstate",()=>{r.page(i.location.pathname)})}i.addEventListener("hashchange",()=>{r.page(i.location.pathname)},!1)})(window,document);
